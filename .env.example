# =============================================================================
# Environment Configuration Template
# =============================================================================
# Copy this file to .env.development or .env.production and fill in the values.
# This file is safe to commit to version control.
#
# Required variables are marked with [REQUIRED]
# Optional variables have sensible defaults or can be left empty
# =============================================================================

# -----------------------------------------------------------------------------
# Django Core Settings [REQUIRED]
# -----------------------------------------------------------------------------
# Set to True for development, False for production
DEBUG=True

# Generate with: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
SECRET_KEY=your-secret-key-here

# Comma-separated list of allowed hostnames
ALLOWED_HOSTS=localhost,127.0.0.1

# Django settings module path
DJANGO_SETTINGS_MODULE=config.settings

# -----------------------------------------------------------------------------
# Database Configuration [REQUIRED]
# -----------------------------------------------------------------------------
# Full database URL (takes precedence over individual vars)
# Format: postgres://USER:PASSWORD@HOST:PORT/DATABASE
DATABASE_URL=postgres://postgres:postgres@db:5432/app_dev

# Individual database settings (used by docker-compose for PostgreSQL container)
POSTGRES_DB=app_dev
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
DATABASE_HOST=db
DATABASE_PORT=5432

# -----------------------------------------------------------------------------
# Redis Configuration [REQUIRED]
# -----------------------------------------------------------------------------
# Redis URL for Django cache (database 0)
REDIS_URL=redis://redis:6379/0

# Redis URL for Celery broker (database 1)
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/1

# -----------------------------------------------------------------------------
# Celery Configuration
# -----------------------------------------------------------------------------
# Set to True to execute tasks synchronously (useful for debugging)
CELERY_TASK_ALWAYS_EAGER=False
CELERY_TASK_EAGER_PROPAGATES=False

# -----------------------------------------------------------------------------
# Security Settings (production only, ignored when DEBUG=True)
# -----------------------------------------------------------------------------
SECURE_SSL_REDIRECT=False
SESSION_COOKIE_SECURE=False
CSRF_COOKIE_SECURE=False
SECURE_HSTS_SECONDS=0

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Comma-separated list of allowed frontend origins
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# -----------------------------------------------------------------------------
# OAuth Providers - Google [REQUIRED for social login]
# -----------------------------------------------------------------------------
# Create credentials at: https://console.cloud.google.com/apis/credentials
# Configure OAuth consent screen and add authorized redirect URIs
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# -----------------------------------------------------------------------------
# OAuth Providers - Apple [REQUIRED for Apple Sign In]
# -----------------------------------------------------------------------------
# Configure at: https://developer.apple.com/account/resources/identifiers
#
# APPLE_CLIENT_ID: Your Services ID (e.g., com.yourcompany.yourapp.auth)
# APPLE_TEAM_ID: Your 10-character Apple Developer Team ID
# APPLE_KEY_ID: The Key ID for your Sign in with Apple private key
# APPLE_PRIVATE_KEY: Contents of your .p8 private key file (include BEGIN/END)
#
# Note: Apple only sends user email on first login. Our custom adapter handles this.
APPLE_CLIENT_ID=your-apple-services-id
APPLE_TEAM_ID=your-apple-team-id
APPLE_KEY_ID=your-apple-key-id
APPLE_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----
your-private-key-contents-here
-----END PRIVATE KEY-----

# -----------------------------------------------------------------------------
# Stripe Configuration [REQUIRED for payments]
# -----------------------------------------------------------------------------
# Get your API keys from: https://dashboard.stripe.com/apikeys
# Use test keys (sk_test_...) for development
# Use live keys (sk_live_...) for production
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key

# Webhook signing secret from: https://dashboard.stripe.com/webhooks
# Each endpoint has its own signing secret
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret

# API timeout in seconds (default: 10)
# Increase if experiencing timeouts, but keep low for responsive error handling
STRIPE_API_TIMEOUT_SECONDS=10

# Maximum retry attempts for transient failures (default: 3)
STRIPE_MAX_RETRIES=3

# -----------------------------------------------------------------------------
# Platform Configuration
# -----------------------------------------------------------------------------
# Platform fee percentage taken from each payment (default: 15%)
PLATFORM_FEE_PERCENT=15

# -----------------------------------------------------------------------------
# Email Configuration
# -----------------------------------------------------------------------------
# For development, use console backend (prints to stdout)
# For production, use SMTP backend with your email provider
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend
EMAIL_HOST=smtp.example.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=
EMAIL_HOST_PASSWORD=
DEFAULT_FROM_EMAIL=noreply@example.com

# -----------------------------------------------------------------------------
# Static & Media Files
# -----------------------------------------------------------------------------
STATIC_URL=/static/
MEDIA_URL=/media/

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=DEBUG

# Log file name (automatically set by docker-compose per service)
# Options: django.log, celery-worker.log, celery-beat.log
# This allows each container to write to its own log file
LOG_FILE_NAME=django.log

# -----------------------------------------------------------------------------
# Optional: Error Tracking (Sentry)
# -----------------------------------------------------------------------------
# SENTRY_DSN=https://your-dsn@sentry.io/project-id

# -----------------------------------------------------------------------------
# Optional: AWS S3 for Media Storage
# -----------------------------------------------------------------------------
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_STORAGE_BUCKET_NAME=
# AWS_S3_REGION_NAME=us-east-1
